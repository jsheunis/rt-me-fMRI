TODO:
- send processing plan to cesar + sveta + lydia + Jaap + Willem
- Get paper+code of Soroosh Insights into DVARS

Collect dataset:
- T1w
- run1_BOLD_rest
- run1_BOLD_task1: motor finger tapping
- run1_BOLD_task2: emotion shape/face matching
- run2_BOLD_rest
- run2_BOLD_task1: motor imagine finger tapping/movements
- run2_BOLD_task2: emotion recall emotional memories
- scanphyslog x 6


Step 1: export
- DICOM
- NIfTI
- PAR/REC
- XML/REC
- scanphyslog
- Eprime (button presses)

Step 2: to BIDS
- Anonimization:
	- anatomical?
	- functional?
	- physiology?
- bidsify / bidsonym / bidscoin / heudiconv / SPM12 or other matlab / dicm2nii xiangraliu something

STEP PILOT: Pilot check (use existing matlab scripts)
- Anatomical to subject space (use middle echo first volume)
- Atlas for amygdala (use INM7?)
- Atlas for motor cortex (use INM7?)
- ROI to subject space
- Real-time pipeline for middle echo:
	- realign (apply middle echo transform to all echoes - ask SPM mailing list)
	- smooth
	- GLM
	- Kalman
	- NFB trace (inspect to see if good PSC is observed)
- Real-time quality checking:
	- FD
- export figures to show

Step 3: quality control
- MRIQC
- Own quality checker scripts
- Metrics to use:
	- physiology between conditions
	- 

Step 4: processing

WHAT TO COMPARE:
- Single (middle) echo vs. echo combination (various methods) vs R2star
- Metrics and visualisation:
	- tSNR (rs brain + task brain + task ROIs)
	- tCNR (BOLD percentage signal change; rs brain + task brain + task ROIs)
	- PSC brain maps and raincloudlots of above
	- DVARS (rs brain + task brain + task ROIs)
	- ThePlot whole brain + task ROI
	- physiology between conditions


Other useful tools to incorporate:
- Pybids for handling BIDS datasets
- 



Steps:
- Parrec + scanphyslog to bids using Lukas tools - python
- Eprime to bids using Taylor tools and own scripts -python
- Anonymise t1w using pydeface - python
- Generate retroicor regressors using PhysIO - matlab
- Preproc using matlab
	- 
- real-time processing using matlab
- Summary stats using python?






IDEAs:
- jupyter notebook with automated pipeline to get 3d printed file from t1 weighted, or something, using: https://github.com/bernhard-42/jupyter-cadquery/
- 


